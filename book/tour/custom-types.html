<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Custom types - The Gleam Book</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="../favicon.svg">
        
        
        <link rel="shortcut icon" href="../favicon.png">
        
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        
        <link rel="stylesheet" href="../css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="../fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../tour/index.html"><strong aria-hidden="true">1.</strong> Language tour</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../tour/comments.html"><strong aria-hidden="true">1.1.</strong> Comments</a></li><li class="chapter-item expanded "><a href="../tour/strings.html"><strong aria-hidden="true">1.2.</strong> Strings</a></li><li class="chapter-item expanded "><a href="../tour/bools.html"><strong aria-hidden="true">1.3.</strong> Bools</a></li><li class="chapter-item expanded "><a href="../tour/ints-and-floats.html"><strong aria-hidden="true">1.4.</strong> Ints &amp; Floats</a></li><li class="chapter-item expanded "><a href="../tour/let-bindings.html"><strong aria-hidden="true">1.5.</strong> Let bindings</a></li><li class="chapter-item expanded "><a href="../tour/expression-blocks.html"><strong aria-hidden="true">1.6.</strong> Expression blocks</a></li><li class="chapter-item expanded "><a href="../tour/lists.html"><strong aria-hidden="true">1.7.</strong> Lists</a></li><li class="chapter-item expanded "><a href="../tour/tuples.html"><strong aria-hidden="true">1.8.</strong> Tuples</a></li><li class="chapter-item expanded "><a href="../tour/case-expressions.html"><strong aria-hidden="true">1.9.</strong> Case expressions</a></li><li class="chapter-item expanded "><a href="../tour/functions.html"><strong aria-hidden="true">1.10.</strong> Functions</a></li><li class="chapter-item expanded "><a href="../tour/modules.html"><strong aria-hidden="true">1.11.</strong> Modules</a></li><li class="chapter-item expanded "><a href="../tour/custom-types.html" class="active"><strong aria-hidden="true">1.12.</strong> Custom types</a></li><li class="chapter-item expanded "><a href="../tour/result.html"><strong aria-hidden="true">1.13.</strong> Result</a></li><li class="chapter-item expanded "><a href="../tour/try.html"><strong aria-hidden="true">1.14.</strong> Try</a></li><li class="chapter-item expanded "><a href="../tour/assert.html"><strong aria-hidden="true">1.15.</strong> Assert</a></li><li class="chapter-item expanded "><a href="../tour/todo.html"><strong aria-hidden="true">1.16.</strong> Todo</a></li><li class="chapter-item expanded "><a href="../tour/constants.html"><strong aria-hidden="true">1.17.</strong> Constants</a></li><li class="chapter-item expanded "><a href="../tour/type-aliases.html"><strong aria-hidden="true">1.18.</strong> Type aliases</a></li><li class="chapter-item expanded "><a href="../tour/bit-strings.html"><strong aria-hidden="true">1.19.</strong> Bit strings</a></li><li class="chapter-item expanded "><a href="../tour/external-functions.html"><strong aria-hidden="true">1.20.</strong> External functions</a></li><li class="chapter-item expanded "><a href="../tour/external-types.html"><strong aria-hidden="true">1.21.</strong> External types</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">The Gleam Book</h1>

                    <div class="right-buttons">
                        
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#custom-types" id="custom-types">Custom types</a></h1>
<p>Gleam's custom types are named collections of keys and values. They are
similar to objects in object oriented languages, though they don't have
methods.</p>
<p>Custom types are defined with the <code>type</code> keyword.</p>
<pre><code class="language-gleam">pub type Cat {
  Cat(name: String, cuteness: Int)
}
</code></pre>
<p>Here we have defined a custom type called <code>Cat</code>. Its constructor is called
<code>Cat</code> and it has two fields: A <code>name</code> field which is a <code>String</code>, and a
<code>cuteness</code> field which is an <code>Int</code>.</p>
<p>The <code>pub</code> keyword makes this type usable from other modules.</p>
<p>Once defined the custom type can be used in functions:</p>
<pre><code class="language-gleam">fn cats() {
  // Labelled fields can be given in any order
  let cat1 = Cat(name: &quot;Nubi&quot;, cuteness: 2001)
  let cat2 = Cat(cuteness: 1805, name: &quot;Biffy&quot;)

  // Alternatively fields can be given without labels
  let cat3 = Cat(&quot;Ginny&quot;, 1950)

  [cat1, cat2, cat3]
}
</code></pre>
<h2><a class="header" href="#multiple-constructors" id="multiple-constructors">Multiple constructors</a></h2>
<p>Custom types in Gleam can be defined with multiple constructors, making them a
way of modeling data that can be one of a few different variants.</p>
<p>We've already seen a custom type with multiple constructors in the Language Tour,</p>
<ul>
<li><a href="./bools.html"><code>Bool</code></a>.</li>
</ul>
<p>The built-in Gleam's <code>Bool</code> type is defined like this:</p>
<pre><code class="language-gleam">// A Bool is a value that is either `True` or `False`
pub type Bool {
  True
  False
}
</code></pre>
<p>It's a simple custom type which constructors that take no arguments at all!
Use it to answer yes/no questions and to indicate whether something is <code>True</code>
or <code>False</code>.</p>
<p>The records created by different constructors for a custom type can contain
different values. For example a <code>User</code> custom type could have a <code>LoggedIn</code>
constructors that creates records with a name, and a <code>Guest</code> constructor which
creates records without any contained values.</p>
<pre><code class="language-gleam">type User {
  LoggedIn(name: String)  // A logged in user with a name
  Guest                   // A guest user with no details
}
</code></pre>
<pre><code class="language-gleam">let sara = LoggedIn(name: &quot;Sara&quot;)
let rick = LoggedIn(name: &quot;Rick&quot;)
let visitor = Guest
</code></pre>
<h2><a class="header" href="#destructuring" id="destructuring">Destructuring</a></h2>
<p>When given a custom type record we can pattern match on it to determine which
record constructor matches, and to assign names to any contained values.</p>
<pre><code class="language-gleam">fn get_name(user) {
  case user {
    LoggedIn(name) -&gt; name
    Guest -&gt; &quot;Guest user&quot;
  }
}
</code></pre>
<p>Custom types can also be destructured with a <code>let</code> binding.</p>
<pre><code class="language-gleam">type Score {
  Points(Int)
}
</code></pre>
<pre><code class="language-gleam">let score = Points(50)
let Points(p) = score

p // =&gt; 50
</code></pre>
<h2><a class="header" href="#opaque-types" id="opaque-types">Opaque types</a></h2>
<p>At times it may be useful to create a type and make the constructors and
fields private so that users of this type can only use the type through
publically exported functions.</p>
<p>For example we can create a <code>Counter</code> type which holds an int which can be
incremented. We don't want the user to alter the int value other than by
incrementing it, so we can make the type opaque to prevent them from being
able to do this.</p>
<pre><code class="language-gleam">// The type is defined with the opaque keyword
pub opaque type Counter {
  Counter(value: Int)
}

pub fn new() {
  Counter(0)
}

pub fn increment(counter: Counter) {
  Counter(counter.value + 1)
}
</code></pre>
<p>Because the <code>Counter</code> type has been marked as <code>opaque</code> it is not possible for
code in other modules to construct or pattern match on counter values or
access the <code>value</code> field. Instead other modules have to manipulate the opaque
type using the exported functions from the module, in this case <code>new</code> and
<code>increment</code>.</p>
<h2><a class="header" href="#record-updates" id="record-updates">Record updates</a></h2>
<p>Gleam provides a dedicated syntax for updating some of the fields of a custom
type record.</p>
<pre><code class="language-gleam">pub type Person {
  Person(
    name: String,
    gender: Option(String),
    shoe_size: Int,
    age: Int,
    is_happy: Bool,
  )
}

pub fn have_birthday(person) {
  // It's this person's birthday, so increment their age and
  // make them happy
  Person(..person, age: person.age + 1, is_happy: true)
}
</code></pre>
<p>As Gleam records are immutable the update syntax does not alter the fields in
place, instead it created a new record with the values of the initial record
with the new values added.</p>
<h2><a class="header" href="#erlang-interop" id="erlang-interop">Erlang interop</a></h2>
<p>At runtime custom type records with no contained values become atoms. The
atoms are written in <code>snake_case</code> rather than <code>CamelCase</code> so <code>LoggedIn</code>
becomes <code>logged_in</code>.</p>
<p>Custom type records with contained values are Erlang records. The Gleam
compiler generates an Erlang header file with a record definition for each
constructor, for use from Erlang.</p>
<pre><code class="language-gleam">// Gleam
Guest
LoggedIn(&quot;Kim&quot;)
</code></pre>
<pre><code># Elixir
:guest
{:logged_in, &quot;Kim&quot;}
</code></pre>
<pre><code>% Erlang
guest,
{logged_in, &lt;&lt;&quot;Kim&quot;&gt;&gt;}.
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../tour/modules.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../tour/result.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../tour/modules.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../tour/result.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        <script type="text/javascript" src="../javascript/highlightjs-gleam.js"></script>
        

        

    </body>
</html>
